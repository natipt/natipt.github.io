<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secret Santa Gift</title>

  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #000;
      overflow: hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: #fff;
    }

    /* ---------- Landing screen ---------- */
    .landing {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      padding: 28px;
      background: radial-gradient(circle at 30% 20%, rgba(255,59,59,0.25), transparent 55%),
                  radial-gradient(circle at 70% 80%, rgba(59,188,255,0.20), transparent 60%),
                  #000;
    }

    .card {
      width: 80vw;
      border-radius: 22px;
      padding: 26px 22px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 24px 60px rgba(0,0,0,0.55);
      backdrop-filter: blur(10px);
    }

    .title {
      font-size: clamp(28px, 4vw, 44px);
      margin: 0 0 8px 0;
      letter-spacing: 0.5px;
    }

    .subtitle {
      margin: 0 0 18px 0;
      color: rgba(255,255,255,0.82);
      line-height: 1.4;
      font-size: 16px;
    }

    .gift {
      margin: 14px 0 18px;
      padding: 14px 16px;
      border-radius: 16px;
      background: rgba(0,0,0,0.35);
      border: 1px dashed rgba(255,255,255,0.22);
      color: rgba(255,255,255,0.9);
      line-height: 1.55;
      font-size: 15px;
    }

    .open-btn {
      width: 100%;
      padding: 18px 18px;
      font-size: 18px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: #fff;
      border: 0;
      border-radius: 16px;
      cursor: pointer;
      user-select: none;
      background: linear-gradient(#ff3b3b, #d60000);
      box-shadow:
        0 10px 0 #8b0000,
        0 18px 32px rgba(0,0,0,0.55);
      transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.06s ease;
    }
    .open-btn:hover { filter: brightness(1.05); }
    .open-btn:active {
      transform: translateY(8px);
      box-shadow:
        0 2px 0 #8b0000,
        0 10px 18px rgba(0,0,0,0.45);
    }

    .tiny {
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,0.6);
      text-align: center;
    }

    /* ---------- Experience screen (your site) ---------- */
    .experience {
      position: fixed;
      inset: 0;
      display: none; /* hidden until opened */
      background: #000;
    }

    /* Video: fit vertically, centered horizontally */
    .stage {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }
    video {
      height: 100vh;
      width: auto;
      max-width: 100vw;
      object-fit: contain;
      background: #000;
      display: block;
    }

    /* Big red 3D button centered at bottom */
    .btn {
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%);
      padding: 18px 26px;
      font-size: 18px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      color: #fff;
      background: linear-gradient(#ff3b3b, #d60000);
      border: 0;
      border-radius: 16px;
      cursor: pointer;
      user-select: none;
      box-shadow:
        0 10px 0 #8b0000,
        0 16px 28px rgba(0,0,0,0.55);
      transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.06s ease;
      z-index: 10;
    }
    .btn:hover { filter: brightness(1.05); }
    .btn:active {
      transform: translateX(-50%) translateY(8px);
      box-shadow:
        0 2px 0 #8b0000,
        0 8px 16px rgba(0,0,0,0.45);
    }
    .btn.blocked {
        transform: translateX(-50%) translateY(8px) !important;
        box-shadow:
            0 2px 0 #393939,
            0 8px 16px rgba(0,0,0,0.45) !important;
        background: #454545 !important;
        color: #aaaaaa !important;
    }

    /* Confetti canvas on top, click-through */
    canvas#confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 20;
    }



    /* Top-right download button */
.download-btn {
  /* position: fixed; */
  top: 18px;
  right: 18px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  font-size: 14px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: #fff;
  background: linear-gradient(#1e1e1e, #000);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.2);
  text-decoration: none;
  cursor: pointer;
  user-select: none;
  z-index: 30;

  box-shadow:
    0 8px 0 rgba(0,0,0,0.7),
    0 14px 26px rgba(0,0,0,0.6);

  transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.06s ease;
}

.download-btn:hover {
  filter: brightness(1.1);
}

.download-btn:active {
  transform: translateY(6px);
  box-shadow:
    0 2px 0 rgba(0,0,0,0.7),
    0 8px 16px rgba(0,0,0,0.5);
}

.download-icon {
  font-size: 18px;
  line-height: 1;
}

/* Stack top-right action buttons */
.action-buttons {
  position: fixed;
  top: 18px;
  right: 18px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 30;
}

/* Variant styling for secondary action */
.action-btn.secondary {
  background: linear-gradient(#2b2b2b, #0b0b0b);
  border: 1px solid rgba(255,255,255,0.18);
}

.action-btn.secondary:hover {
  filter: brightness(1.12);
}

.action-icon {
  font-size: 18px;
  line-height: 1;
}
.stage { z-index: 1; }
.experience .action-buttons { z-index: 9999; }

  </style>
</head>

<body>
  <!-- ---------- Landing Screen ---------- -->
  <section class="landing" id="landing">
    <div class="card">
      <h1 class="title">üéÅ Secret Sanyo Delivery</h1>
      <p class="subtitle">
        This is your gift. It contains exactly one (1) $7 venmo transaction to be employed toward the purchase of the <a href="https://store.finalfantasyxiv.com/ffxivstore/en-us/product/298" style="color:aqua;">backflip emote</a> in the FFXIV Mog Station, which is unfortunately "ungiftable", and one (1)
        cinematic deadlift sequence. At some impossible-to-be-determined time in the future, you will also receive a comic book in the mail.
      </p>

      <div class="gift" contenteditable="false">
        <strong>Message:</strong><br />
        Dear Ari,<br /><br />
            At first I got you a comic book, but then I forgot to mail it before jetting off for the holidays. Subsequently, I decided to put my coding skills to use toward a digital gift, whereupon I hyperfixated on the notion that my gift must involve Hale being a jock, and furthermore must involve Hale being a jock beyond the confines of what the rather lacking Mog Station emote offerings allow. 
            So, ambitiously, I set out to make her a virtual gym, but it turns out exporting a Final Fantasy XIV‚Ñ¢ character model into Blender and animating + rendering it is fucking hard, and a full gym would've taken several weeks to make, so instead you get this. A single deadlift. 
        <br /><br />
        ‚Äî Your Sanyo
      </div>

      <button class="open-btn" id="openGift">Open Gift</button>
      <div class="tiny">Tip: turn your sound on üîä</div>
    </div>
  </section>

  <!-- ---------- Experience Screen ---------- -->
  <section class="experience" id="experience">
    <div class="action-buttons">
        <!-- Download Blender file -->
        <a class="download-btn action-btn" href="HaleHeart.blend" download>
          <span class="action-icon">‚¨áÔ∏è</span>
          Download Blender File
        </a>
      
        <!-- Mog Station emote link -->
        <a
          class="download-btn action-btn secondary"
          href="https://store.finalfantasyxiv.com/ffxivstore/en-us/product/298"
          target="_blank"
          rel="noopener noreferrer"
        >
          <span class="action-icon">ü§∏‚Äç‚ôÄÔ∏è</span>
          Backflip Emote (Mogstation)
        </a>
      </div>

      
    <div class="stage">
      <video id="vid" preload="auto" playsinline>
        <source src="deadlift.mp4" type="video/mp4">
      </video>
    </div>

    <button id="go" class="btn">Initiate Deadlift Sequence</button>
    <canvas id="confetti"></canvas>
    <audio id="tadah" src="fanfareff1.mp3" preload="auto"></audio>
  </section>

  <script>
    // Screen swap
    const landing = document.getElementById('landing');
    const experience = document.getElementById('experience');
    document.getElementById('openGift').addEventListener('click', () => {
      landing.style.display = 'none';
      experience.style.display = 'block';
    });

    // Video + button
    const vid = document.getElementById('vid');
    const btn = document.getElementById('go');
    const tada = document.getElementById('tadah');

    vid.addEventListener('loadedmetadata', () => {
      vid.pause();
      vid.currentTime = 0; // first frame
    });

    btn.addEventListener('click', () => {
        tada.pause();
        tada.currentTime = 0;

        vid.pause();
        vid.currentTime = 0;
        vid.play();
    });

    // Confetti (based on your tilt/line style)
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W = window.innerWidth, H = window.innerHeight;
    canvas.width = W; canvas.height = H;

    const confettiCount = 180;
    let confettis = [];
    const colors = ['#f44336','#e91e63','#9c27b0','#3f51b5','#00bcd4','#4caf50','#ffeb3b','#ff9800'];
    let running = false;
    let stopAt = 0;

    function resetConfetti() {
      confettis = [];
      for (let i = 0; i < confettiCount; i++) {
        confettis.push({
          x: Math.random() * W,
          y: Math.random() * -H,
          r: Math.random() * 6 + 4,
          d: Math.random() * confettiCount,
          color: colors[Math.floor(Math.random() * colors.length)],
          tilt: Math.random() * 10 - 10,
          tiltAngle: 0,
          tiltAngleIncrement: Math.random() * 0.07 + 0.05
        });
      }
    }

    function draw() {
      ctx.clearRect(0, 0, W, H);
      for (let i = 0; i < confettis.length; i++) {
        const c = confettis[i];
        ctx.beginPath();
        ctx.lineWidth = c.r;
        ctx.strokeStyle = c.color;
        ctx.moveTo(c.x + c.tilt + c.r / 2, c.y);
        ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r);
        ctx.stroke();
      }
    }

    function update() {
      for (let i = 0; i < confettis.length; i++) {
        const c = confettis[i];
        c.y += Math.cos(c.d) + 1 + c.r / 2;
        c.tiltAngle += c.tiltAngleIncrement;
        c.tilt = Math.sin(c.tiltAngle) * 15;
      }
      if (!running) confettis = confettis.filter(c => c.y < H + 20);
    }

    function loop(t) {
      if (!running && confettis.length === 0) return;
      if (running && t >= stopAt) running = false;
      draw();
      update();
      requestAnimationFrame(loop);
    }

    function popConfetti(duration = 2600) {
      resetConfetti();
      running = true;
      stopAt = performance.now() + duration;

      // Play tadah sound with confetti
      try {
        tada.currentTime = 0.5;
        tada.play();
      } catch (e) {
        // ignore if blocked; usually allowed because user clicked earlier
      }

      requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => {
      W = window.innerWidth; H = window.innerHeight;
      canvas.width = W; canvas.height = H;
    });

    // Stop on last frame + confetti + sound
    vid.addEventListener('ended', () => {
      const epsilon = 0.04;
      vid.pause();
      vid.currentTime = Math.max(0, vid.duration - epsilon);
      popConfetti();
    });
  </script>
</body>
</html>
